<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Tensil</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Tensil</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> Tensil</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#tensil" id="tensil" style="color: inherit; text-decoration: none;">
					<h1>Tensil</h1>
				</a>
				<p>Express server Service, Controller and Routing framework.</p>
				<a href="#introduction" id="introduction" style="color: inherit; text-decoration: none;">
					<h2>Introduction</h2>
				</a>
				<p>Tensil flexible and lightweight. It intentionally leaves out opinion and focuses on painless secure routing. The idea behind Tensil is flexibilty with just enough magic. Services and Controllers can be mounted to the root router or their own router for app segregation. </p>
				<a href="#install" id="install" style="color: inherit; text-decoration: none;">
					<h2>Install</h2>
				</a>
				<pre><code class="language-sh">$ npm install tensil -s</code></pre>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> tensil, { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">'tensil'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> bodyParser <span class="hljs-keyword">from</span> <span class="hljs-string">'body-parser'</span>;

<span class="hljs-keyword">class</span> MyController <span class="hljs-keyword">extends</span> Controller {
  <span class="hljs-comment">// See below for configuring Controllers &amp; Services</span>
  <span class="hljs-comment">// Excluded here for clarity sake of how to wire up Tensil.</span>
}

tensil.app.use(bodyParser.json());
tensil.app.use(bodyParser.urlencoded({ extended: <span class="hljs-literal">true</span> }));
tensil.app.use(bodyParser.text());
tensil.app.use(bodyParser.json({ <span class="hljs-keyword">type</span>: <span class="hljs-string">'application/json'</span> }));

tensil
  .registerController(MyController)
  .start();
</code></pre>
				<a href="#with-custom-app" id="with-custom-app" style="color: inherit; text-decoration: none;">
					<h2>With Custom App</h2>
				</a>
				<p>Using Tensil with external express() app.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> tensil <span class="hljs-keyword">from</span> <span class="hljs-string">'tensil'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

<span class="hljs-keyword">const</span> app = express();
tensil.app = app;</code></pre>
				<a href="#with-http-server" id="with-http-server" style="color: inherit; text-decoration: none;">
					<h2>With Http Server</h2>
				</a>
				<p>Using Tensil with http.createServer</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> tensil <span class="hljs-keyword">from</span> <span class="hljs-string">'tensil'</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

tensil.withServer();

<span class="hljs-comment">// OR</span>
tensil.withServer(express());

<span class="hljs-comment">// OR</span>
tensil.withServer({ options });

<span class="hljs-comment">// OR with SSL</span>
tensil.withServer({ options }, <span class="hljs-literal">true</span>); <span class="hljs-comment">// </span></code></pre>
				<a href="#server" id="server" style="color: inherit; text-decoration: none;">
					<h2>Server</h2>
				</a>
				<p>Configuring a Tensil Service.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> tensil, { filter, Service } <span class="hljs-keyword">from</span> <span class="hljs-string">'tensil'</span>;
<span class="hljs-keyword">import</span> { format } <span class="hljs-keyword">from</span> <span class="hljs-string">'util'</span>;

<span class="hljs-keyword">class</span> MyService <span class="hljs-keyword">extends</span> Service {

  filters: {
    canCreate: [<span class="hljs-string">'log'</span>, <span class="hljs-string">'isAuthorized'</span>]
  }

  <span class="hljs-keyword">private</span> formatMessage(message, ...args) {
    <span class="hljs-keyword">return</span> format(message, args);
  }

  <span class="hljs-meta">@filter</span>
  log(req, res, next) {
    <span class="hljs-comment">// Log a message when this filter is hit.</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.formatMessage(<span class="hljs-string">'Request id'</span>, <span class="hljs-number">123456</span>));
    next();
  }

  <span class="hljs-meta">@filter</span>
  isAuthorized(req, res, next) {
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'authorized'</span>)
      <span class="hljs-keyword">return</span> next();
    res.status(<span class="hljs-number">403</span>).send();
  }

}

<span class="hljs-keyword">const</span> myService = <span class="hljs-keyword">new</span> MyService();
<span class="hljs-comment">// OR</span>
tensil.registerSerivce(MyService);</code></pre>
				<a href="#controller" id="controller" style="color: inherit; text-decoration: none;">
					<h2>Controller</h2>
				</a>
				<p>Configuring a Tensil Controller.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">import</span> tensil, { action, HttpMethod } <span class="hljs-keyword">from</span> <span class="hljs-string">'tensil'</span>;
<span class="hljs-keyword">class</span> MyController <span class="hljs-keyword">extends</span> Tensil.Controller {

  <span class="hljs-comment">// When a custom route or generated route</span>
  <span class="hljs-comment">// calls "MyController.create" as it's action method</span>
  <span class="hljs-comment">// the MyService filter "canCreate" is injected.</span>

  <span class="hljs-comment">// The result would be as if you did the following manually:</span>
  <span class="hljs-comment">// app.post('/user/:id?, ['Myservice.log', 'Myservice.isAuthorized', 'MyController.create'])</span>

  policies: {
    create: [<span class="hljs-string">'MyService.filters.canCreate'</span>] <span class="hljs-comment">// </span>
  }

  <span class="hljs-comment">// or use HttpMethod.Get </span>
  <span class="hljs-comment">// or template defined in options like "find"</span>
  <span class="hljs-comment">// or define with path @action('get', '/some/path/:id?')</span>
  <span class="hljs-meta">@action</span>() 
  find(req, res) {
    <span class="hljs-comment">// find a record.</span>
    res.json({});
  }

  <span class="hljs-meta">@action</span>(HttpMethod.Post) 
  create(req, res) {
    <span class="hljs-comment">// create a record</span>
    res.status(<span class="hljs-number">201</span>).json({})
  }

}

<span class="hljs-keyword">const</span> myController = <span class="hljs-keyword">new</span> MyController(<span class="hljs-string">'user'</span>);
<span class="hljs-comment">// OR</span>
tensil.registerController(MyController, <span class="hljs-string">'user'</span>);</code></pre>
				<a href="#default-action-templates" id="default-action-templates" style="color: inherit; text-decoration: none;">
					<h2>Default Action Templates</h2>
				</a>
				<p>Templates allow you to map your action decorators to a key to make the defining of generated routes for controller actions less verbose. You can always override and defined a specific path. </p>
				<p>Simply define a template below then use as:</p>
				<pre><code class="language-ts"><span class="hljs-meta">@action</span>(<span class="hljs-string">'my-template-name'</span>)
create(req, res) {
  <span class="hljs-comment">//</span>
}</code></pre>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> options = {
  templates: {
   <span class="hljs-keyword">get</span>: <span class="hljs-string">'get /{{action}}'</span>,
   put: <span class="hljs-string">'put /{{action}}/:id?'</span>,
   post: <span class="hljs-string">'post /{{action}}'</span>,
   del: <span class="hljs-string">'delete /{{action}}/:id?'</span>,
   find: <span class="hljs-string">'get /{{action}}/:id?'</span>,
   create: <span class="hljs-string">'post /{{action}}'</span>,
   update: <span class="hljs-string">'put /{{action}}/:id?'</span>,
   <span class="hljs-keyword">delete</span>: <span class="hljs-string">'delete /{{action}}/:id?'</span>,
  }
  formattter: <span class="hljs-function">(<span class="hljs-params">key, path, <span class="hljs-keyword">type</span></span>) =&gt;</span> {
    <span class="hljs-comment">// override default formatter function</span>
    <span class="hljs-comment">// to handle formatting of above templates</span>
    <span class="hljs-comment">// by default rest routes remove {{action}}</span>
  }
  rest: <span class="hljs-literal">true</span>,
  crud: <span class="hljs-literal">false</span>

}</code></pre>
				<a href="#events" id="events" style="color: inherit; text-decoration: none;">
					<h2>Events</h2>
				</a>
				<p>A pipe &quot;<strong>|</strong>&quot; indicates or. By default all errors are emitted without halting by throwing an error. When <code>options.strict</code> is enabled then errors will be thrown. Note when NOT <strong>prodcution</strong> strict is automatically enabled when strict is undefined. This is done to ensure there are not duplicate registrations and routes in a production environment.</p>
				<p>Listening to all events for a given group.</p>
				<pre><code class="language-ts">tensil.on(<span class="hljs-string">`route`</span>, <span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span>, ...args</span>) =&gt;</span> {
  <span class="hljs-comment">// do something with route.</span>
});</code></pre>
				<p>To listen to a specific event type you combine the event with the type separated by a colon. When listening to a specific event type the <strong>type</strong> is removed from the first argument.</p>
				<pre><code class="language-ts">tensil.on(<span class="hljs-string">`route:mounted`</span>, <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
  <span class="hljs-comment">// do something with route.</span>
});</code></pre>
				<p>You can also listen to ALL events as follows:</p>
				<pre><code class="language-ts">tensil.on(<span class="hljs-string">`*`</span>, <span class="hljs-function">(<span class="hljs-params">event, <span class="hljs-keyword">type</span>, ...args</span>) =&gt;</span> {
  <span class="hljs-comment">// do something with event.</span>
});</code></pre>
				<table>
					<caption>Tensil Events</caption>
					<tr><th>Event</th><th>Type</th><th>Value1</th><th>Value2</th></tr>
					<tr><td>entity</td><td>duplicate</td><td>Error</td><td></td></tr>
					<tr><td>policy</td><td>invalid</td><td>Error</td><td></td></tr>
					<tr><td>filter</td><td>invalid</td><td>Error</td><td></td></tr>
					<tr><td>route</td><td>duplicate</td><td>Error</td>x<td></td></tr>
					<tr><td>route</td><td>invalid</td><td>Error</td><td></td></tr>
					<tr><td>entity</td><td>registered</td><td>Service | Controller</td><td></td></tr>
					<tr><td>policy</td><td>create</td><td>IPolicy | IPolicies</td><td></td></tr>
					<tr><td>filter</td><td>create</td><td>IFilter | IFilters }</td><td></td></tr>
					<tr><td>route</td><td>create</td><td>IRoute | IRoutes</td><td></td></tr>
					<tr><td>route</td><td>registered</td><td>path: string</td><td>IRouteConfig'<'Request, Response'>'</td></tr>
					<tr><td>route</td><td>mounted</td><td>path: string</td><td>IRouteConfig'<'Request, Response'>'</td></tr>
					<tr><td>mount</td><td>completed</td><td>null</td><td></td></tr>
					<tr><td>init</td><td>completed</td><td>null</td><td></td></tr>
					<tr><td>start</td><td>completed</td><td>null</td><td></td></tr>
				</table>
				<a href="#docs" id="docs" style="color: inherit; text-decoration: none;">
					<h2>Docs</h2>
				</a>
				<p>See <a href="https://blujedis.github.io/tensil/">https://blujedis.github.io/tensil/</a></p>
				<a href="#change" id="change" style="color: inherit; text-decoration: none;">
					<h2>Change</h2>
				</a>
				<p>See <a href="CHANGE.md">CHANGE.md</a></p>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>See <a href="LICENSE">LICENSE.md</a></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_core_.html">"core"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_debug_controllers_.html">"debug/controllers"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_debug_data_.html">"debug/data"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_debug_entities_.html">"debug/entities"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_debug_index_.html">"debug/index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_debug_services_.html">"debug/services"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_decorators_.html">"decorators"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_entity_.html">"entity"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">"index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_tensil_.html">"tensil"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_types_.html">"types"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_utils_.html">"utils"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>